<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signos Vitales</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='estilo.css') }}">
</head>
<body>
<h1>Registro de paciente</h1>
<form method="POST">
    <label>CURP:</label><input type="text" name="CURP" required><br>
    <label>Nombre:</label><input type="text" name="nombre" required><br>
    <label>Edad:</label><input type="number" name="edad" required><br>
    <label>Frecuencia cardíaca (lat/min):</label><input type="number" name="frecuencia" required><br>
    <label>Temperatura corporal (°C):</label><input type="number" step="0.1" name="temperatura" required><br>
    <label>Frecuencia respiratoria (resp/min):</label><input type="number" name="respiracion" required><br>
    <label>Presión arterial (mmHg):</label><input type="text" name="presion" required><br>
    <button type="submit">Registrar</button>
</form>
    <a href="/pacientes"><button>Ver todos los pacientes registrados</button></a>
    <h2>Buscar paciente por CURP</h2>
<form action="/buscar" method="GET">
    <label>CURP del paciente:</label>
    <input type="text" name="CURP" required>
    <button type="submit">Buscar</button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const curpInput = document.querySelector('input[name="CURP"]');
        const nombreInput = document.querySelector('input[name="nombre"]');

        curpInput.addEventListener('blur', () => {
            const curp = curpInput.value.trim();
            if (curp) {
                fetch('/obtener_nombre', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({CURP: curp})
                })
                .then(response => response.json())
                .then(data => {
                    if (data.nombre) {
                        nombreInput.value = data.nombre;
                    }
                });
            }
        });
    });
    </script>
</body>
</html>